<html>
<body>

  <script type="text/javascript" src="vendor/jquery/jquery.min.js"></script>

  <script src="out/telegramApi-full.min.js"></script>

  <style>
    input, button, span, select {
      margin: 10px;
      padding: 10px;
    }
  </style>

  <input id="phone" type="text" placeholder="Phone" value="79823663413">
  <button id="sendButton">Send code</button>

  <br>

  <input id="code" type="text" placeholder="code">
  <button id="signInButton">Sign in</button>
  <span>Phone code hash: </span>
  <span id="phoneHash"></span>

  <br>

  <select name="Контакты" id="select"></select>
  <input id="message" type="text" placeholder="Message">
  <button id="sendMessageButton">SendMessage</button>

  <br>

  <button id="getDialogsButton">Get dialogs</button>

  <br>

  <button id="addBotButton">Add selinkBot</button>

  <script>
    $('#sendButton').click(function() {
      telegramApi.sendCode($('#phone').val()).then(function (sentCode) {
        $('#phoneHash').text(sentCode.phone_code_hash);
      });
    });

    $('#signInButton').click(function () {
      var phone = $('#phone').val();
      var hash = $('#phoneHash').text();
      var code = $('#code').val();
      telegramApi.signIn(phone, hash, code);
    });

    $('#sendMessageButton').click(function () {
      var id = $('#select').val();
      var message = $('#message').val();
      telegramApi.sendMessage(id, message);
    });

    $('#getDialogsButton').click(function () {
      telegramApi.getDialogs().then(function (result) {
        $('#select').empty();
        result.forEach(function (dialog) {
          var text = dialog._ == 'chat' ? dialog.title : dialog.first_name + (dialog.last_name ? ' ' + dialog.last_name : '');
          $('#select').append('<option value="' + dialog.id + '">' + text + '</option>');
        });
      });
    });

    $('#addBotButton').click(function () {
      telegramApi.startBot('selinkbot');
    });
  </script>

</body>
</html>
